/**
 * skylark-domx-layouts - The dom layout features enhancement for skylark utils.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.1
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx/langx","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","./layouts"],function(t,o,i,a,n){var l=t.klass({_measureColumns:function(t,o,i){var a=this._,n=a.calculated;if(a.columnWidth)n.columnWidth=a.columnWidth;else{var l=t[0];n.columnWidth=l&&l.bounds().extraWidth()||o.width}var s=n.columnWidth+=a.gutter,e=o.width+a.gutter;if(a.cols)c=a.cols;else{var c=e/s,u=s-e%s;c=Math[u&&u<1?"round":"floor"](c)}n.cols=Math.max(c,1)},_positionItem:function(t,o,n,l){a.css(t,{position:"absolute"}),l?i.relativePositionitem(t,{left:o,top:n}):t[this._.animation]?t[this._.animation](o,n):t.moveto(o,n)},_getColGroup:function(t){var o=this._.calculated;if(t<2)return o.colYs;for(var i=[],a=o.cols+1-t,n=0;n<a;n++){var l=o.colYs.slice(n,n+t);i[n]=Math.max.apply(Math,l)}return i},_getItemLayoutPosition:function(t){var o=this._.calculated,a=i.marginSize(t),n=a.width%o.columnWidth,l=Math[n&&n<1?"round":"ceil"](a.width/o.columnWidth);l=Math.min(l,o.cols);for(var s=this._getColGroup(l),e=Math.min.apply(Math,s),c=s.indexOf(e),u={x:o.columnWidth*c,y:e},r=e+a.height,h=o.cols+1-s.length,m=0;m<h;m++)o.colYs[c+m]=r;return u},_filterItems:function(t){return t},_resetLayout:function(t,o,i){var a=this._.calculated;this._measureColumns(t,o,i),a.colYs=[];for(var n=0;n<a.cols;n++)a.colYs.push(0);a.maxY=0},_calcLayout:function(t,o,i){this._resetLayout(t,o,i);var a=[];return t.forEach(function(t){var o=this._getItemLayoutPosition(t);o.item=t,a.push(o)},this),a},_postLayout:function(t,o){var i=this._;if(i.autoFit){var a=i.calculated,n=Math.max.apply(Math,a.colYs);o.domNode.style.height=n+"px"}t.forEach(function(t){this._positionItem(t.item,t.x,t.y,t.isInstant)},this)},layout:function(){var t=this._,a=t.container,n=o.children(a,t.items),l=i.clientSize(a),s=this._calcLayout(n,l,a);this._postLayout(s,a)},init:function(o,i){(this._=t.mixin({autoFit:!0,columnWidth:0,cols:0,gutter:0,animation:"moveto",calculated:{colYs:null,columnWidth:0,cols:0}},i)).container=o}});return n.masonry=function(t,o){new l(t,o).layout()}});
//# sourceMappingURL=sourcemaps/masonry.js.map
