/**
 * skylark-utils-layout - The dom layout features enhancement for skylark utils.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.1
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(t,i){function n(t,i){if("."!==t[0])return t;var n=i.split("/"),l=t.split("/");n.pop();for(var o=0;o<l.length;o++)"."!=l[o]&&(".."==l[o]?n.pop():n.push(l[o]));return n.join("/")}var l=i.define,o=i.require,a="function"==typeof l&&l.amd,r=!a&&"undefined"!=typeof exports;if(!a&&!l){var s={};l=i.define=function(t,i,l){"function"==typeof l?(s[t]={factory:l,deps:i.map(function(i){return n(i,t)}),exports:null},o(t)):s[t]=l},o=i.require=function(t){if(!s.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var i=s[t];if(!i.exports){var n=[];i.deps.forEach(function(t){n.push(o(t))}),i.exports=i.factory.apply(window,n)}return i.exports}}if(!l)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(t(l,o),!a){var e=o("skylark-langx/skylark");r?exports=e:i.skylarkjs=e}}(function(t,i){t("skylark-utils-layout/layouts",["skylark-utils/skylark","skylark-utils/langx"],function(t,i){var n=t.layouts={};return n}),t("skylark-utils-layout/Orientation",["skylark-langx/langx","./layouts"],function(t,i){var n=layout.Orientation={horz:1,vert:2};return n}),t("skylark-utils-layout/box",["skylark-langx/langx","skylark-utils/query","./layouts","./Orientation"],function(t,i,n,l){var o=n.box=function(n,o){var o=t.mixin({items:".item",wspacing:100,hspacing:100,orientation:l.vert},o),a=i(n).clientSize(),r=a.width,s=a.height,e=0,u=0,c=i(n).children(o.items);c.each(function(t){i(this).css({left:e,top:u,position:"absolute",display:"inline-block"}),o.orientation==l.vert?(u+=o.hspacing,u>=s-o.hspacing&&(u=0,e+=o.wspacing)):(e+=o.wspacing,e>=r-o.wspacing&&(e=0,u+=o.hspacing))})};return o}),t("skylark-utils-layout/bsgrid",["skylark-langx/langx","./layouts"],function(t,i){var n=i.bsgrid=function(t,i){throw new Error("This method is not implemented!")};return n}),t("skylark-utils-layout/columns",["skylark-langx/langx","skylark-utils/query","./layouts"],function(t,i,n){var l=n.columns=function(n,l){var l=t.mixin({items:".item"},l),o=i(n).children(l.items);o.css({left:"0px",top:"0px",position:"relative",display:"table-cell"})};return l}),t("skylark-utils-layout/DockStyle",["skylark-langx/langx","./layouts"],function(t,i){var n=i.DockStyle={none:1,left:2,top:3,right:4,bottom:5,client:6};return n}),t("skylark-utils-layout/dock",["skylark-langx/langx","skylark-utils/datax","skylark-utils/finder","skylark-utils/geom","./layouts","./DockStyle"],function(t,i,n,l,o,l,a){var r=o.dock=function(o,a){var a=t.mixin({items:"[data-region]"},a),r=l.clientSize(o),s={l:0,t:0,w:r.width,h:r.height},e=n.children(o,a.items);e=e.filter(function(t){return"client"!=i.data(t,"region")}).concat(e.filter(function(t){return"client"==i.data(t,"region")})),e.forEach(function(t){var n=i.data(t,"region"),o=l.size(t);if(!n)throw new Error("No dock setting for "+t.id);styler.css(elm,{position:"absolute"});var a={left:s.l,top:s.t};"top"==n||"bottom"==n?(a.width=s.w,s.h-=o.height,a.top=s.t+s.h):"left"==n||"right"==n?(a.height=s.h,s.w-=o.width,"left"==pos?s.l+=o.width:a.left=s.l+s.w):"client"==n&&(a.width=s.w,a.height=s.h),l.relativeRect(t,a)})};return r}),t("skylark-utils-layout/flow",["skylark-langx/langx","skylark-utils/query","./layouts"],function(t,i,n){var l=n.flow=function(n,l){var l=t.mixin({items:".item"},l),o=i(n).children(l.items);o.css({left:"0px",top:"0px",position:"relative",display:"inline-block"})};return l}),t("skylark-utils-layout/grid",["skylark-langx/langx","./layouts"],function(t,i){var n=i.grid=function(t,i){throw new Error("This method is not implemented!")};return n}),t("skylark-utils-layout/masonry",["skylark-langx/langx","skylark-utils/finder","skylark-utils/geom","skylark-utils/styler","./layouts"],function(t,i,n,l,o){var a=t.klass({_measureColumns:function(t,i,n){var l=this._,o=l.calculated;if(l.columnWidth)o.columnWidth=l.columnWidth;else{var a=t[0];o.columnWidth=a&&a.bounds().extraWidth()||i.width}var r,s=o.columnWidth+=l.gutter,e=i.width+l.gutter;if(l.cols)r=l.cols;else{var r=e/s,u=s-e%s,c=u&&u<1?"round":"floor";r=Math[c](r)}o.cols=Math.max(r,1)},_positionItem:function(t,i,o,a){l.css(t,{position:"absolute"}),a?n.relativePositionitem(t,{left:i,top:o}):t[this._.animation]?t[this._.animation](i,o):t.moveto(i,o)},_getColGroup:function(t){var i=this._,n=i.calculated;if(t<2)return n.colYs;for(var l=[],o=n.cols+1-t,a=0;a<o;a++){var r=n.colYs.slice(a,a+t);l[a]=Math.max.apply(Math,r)}return l},_getItemLayoutPosition:function(t){var i=this._,l=i.calculated,o=n.marginSize(t),a=o.width%l.columnWidth,r=a&&a<1?"round":"ceil",s=Math[r](o.width/l.columnWidth);s=Math.min(s,l.cols);for(var e=this._getColGroup(s),u=Math.min.apply(Math,e),c=e.indexOf(u),y={x:l.columnWidth*c,y:u},h=u+o.height,k=l.cols+1-e.length,f=0;f<k;f++)l.colYs[c+f]=h;return y},_filterItems:function(t){return t},_resetLayout:function(t,i,n){var l=this._,o=l.calculated;this._measureColumns(t,i,n),o.colYs=[];for(var a=0;a<o.cols;a++)o.colYs.push(0);o.maxY=0},_calcLayout:function(t,i,n){this._resetLayout(t,i,n);var l=[];return t.forEach(function(t){var i=this._getItemLayoutPosition(t);i.item=t,l.push(i)},this),l},_postLayout:function(t,i){var n=this._;if(n.autoFit){var l=n.calculated,o=Math.max.apply(Math,l.colYs);i.domNode.style.height=o+"px"}t.forEach(function(t){this._positionItem(t.item,t.x,t.y,t.isInstant)},this)},layout:function(){var t=this._,l=t.container,o=i.children(l,t.items),a=n.clientSize(l),r=this._calcLayout(o,a,l);this._postLayout(r,l)},init:function(i,n){var l=this._=t.mixin({autoFit:!0,columnWidth:0,cols:0,gutter:0,animation:"moveto",calculated:{colYs:null,columnWidth:0,cols:0}},n);l.container=i}}),r=o.masonry=function(t,i){var n=new a(t,i);n.layout()};return r}),t("skylark-utils-layout/rows",["skylark-langx/langx","skylark-utils/query","./layouts"],function(t,i,n){var l=n.rows=function(n,l){var l=t.mixin({items:".item"},l),o=i(n).children(l.items);o.css({left:"0px",top:"0px",position:"relative",display:"list-item"})};return l}),t("skylark-utils-layout/table",["skylark-langx/langx","skylark-utils/query","./layouts"],function(t,i,n){var l=n.table=function(n,l){var l=t.mixin({items:".item"},l),o=i(n).children(l.items);o.css({width:"100%",display:"table-row"}),o.each(function(){i(this).children().css({display:"table-cell"})})};return l}),t("skylark-utils-layout/main",["./layouts","./box","./bsgrid","./columns","./dock","./DockStyle","./flow","./grid","./masonry","./rows","./table"],function(t){return t}),t("skylark-utils-layout",["skylark-utils-layout/main"],function(t){return t})},this);
//# sourceMappingURL=sourcemaps/skylark-utils-layout.js.map
