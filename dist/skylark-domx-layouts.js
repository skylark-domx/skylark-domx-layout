/**
 * skylark-domx-layouts - The dom layout features enhancement for skylark utils.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.1
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(t,o){var i=o.define,require=o.require,n="function"==typeof i&&i.amd,a=!n&&"undefined"!=typeof exports;if(!n&&!i){var r={};i=o.define=function(t,o,i){"function"==typeof i?(r[t]={factory:i,deps:o.map(function(o){return function(t,o){if("."!==t[0])return t;var i=o.split("/"),n=t.split("/");i.pop();for(var a=0;a<n.length;a++)"."!=n[a]&&(".."==n[a]?i.pop():i.push(n[a]));return i.join("/")}(o,t)}),resolved:!1,exports:null},require(t)):r[t]={factory:null,resolved:!0,exports:i}},require=o.require=function(t){if(!r.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var module=r[t];if(!module.resolved){var i=[];module.deps.forEach(function(t){i.push(require(t))}),module.exports=module.factory.apply(o,i)||null,module.resolved=!0}return module.exports}}if(!i)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,require){t("skylark-domx-layouts/layouts",["skylark-langx/skylark"],function(t){return t.attach("domx.layouts",{})}),t("skylark-domx-layouts/Orientation",["skylark-langx/langx","./layouts"],function(t,o){var i=o.Orientation={Horizontal:1,Vertical:2};return i}),t("skylark-domx-layouts/box",["skylark-langx/langx","skylark-domx-query","./layouts","./Orientation"],function(t,o,i,n){var a=i.box=function(i,a){var a=t.mixin({items:".item",wspacing:100,hspacing:100,orientation:n.vert},a),r=o(i).clientSize(),l=r.width,e=r.height,s=0,u=0,c=o(i).children(a.items);c.each(function(t){o(this).css({left:s,top:u,position:"absolute",display:"inline-block"}),a.orientation==n.vert?(u+=a.hspacing)>=e-a.hspacing&&(u=0,s+=a.wspacing):(s+=a.wspacing)>=l-a.wspacing&&(s=0,u+=a.hspacing)})};return a}),t("skylark-domx-layouts/bsgrid",["skylark-langx/langx","./layouts"],function(t,o){var i=o.bsgrid=function(t,o){throw new Error("This method is not implemented!")};return i}),t("skylark-domx-layouts/columns",["skylark-langx/langx","skylark-domx-query","./layouts"],function(t,o,i){var n=i.columns=function(i,n){var n=t.mixin({items:".item"},n),a=o(i).children(n.items);a.css({left:"0px",top:"0px",position:"relative",display:"table-cell"})};return n}),t("skylark-domx-layouts/DockStyle",["skylark-langx/langx","./layouts"],function(t,o){var i=o.DockStyle={None:1,Left:2,Top:3,Right:4,Bottom:5,Client:6};return i}),t("skylark-domx-layouts/dock",["skylark-langx/langx","skylark-domx-data","skylark-domx-finder","skylark-domx-geom","./layouts","./DockStyle"],function(t,o,i,n,a,n,r){var l=a.dock=function(a,r){var r=t.mixin({items:"[data-region]"},r),l=n.clientSize(a),e={l:0,t:0,w:l.width,h:l.height},s=i.children(a,r.items);(s=s.filter(function(t){return"client"!=o.data(t,"region")}).concat(s.filter(function(t){return"client"==o.data(t,"region")}))).forEach(function(t){var i=o.data(t,"region"),a=n.size(t);if(!i)throw new Error("No dock setting for "+t.id);styler.css(elm,{position:"absolute"});var r={left:e.l,top:e.t};"top"==i||"bottom"==i?(r.width=e.w,e.h-=a.height,r.top=e.t+e.h):"left"==i||"right"==i?(r.height=e.h,e.w-=a.width,"left"==pos?e.l+=a.width:r.left=e.l+e.w):"client"==i&&(r.width=e.w,r.height=e.h),n.relativeRect(t,r)})};return l}),t("skylark-domx-layouts/flow",["skylark-langx/langx","skylark-domx-query","./layouts"],function(t,o,i){var n=i.flow=function(i,n){var n=t.mixin({items:".item"},n),a=o(i).children(n.items);a.css({left:"0px",top:"0px",position:"relative",display:"inline-block"})};return n}),t("skylark-domx-layouts/grid",["skylark-langx/langx","./layouts"],function(t,o){var i=o.grid=function(t,o){throw new Error("This method is not implemented!")};return i}),t("skylark-domx-layouts/masonry",["skylark-langx/langx","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","./layouts"],function(t,o,i,n,a){var r=t.klass({_measureColumns:function(t,o,i){var n=this._,a=n.calculated;if(n.columnWidth)a.columnWidth=n.columnWidth;else{var r=t[0];a.columnWidth=r&&r.bounds().extraWidth()||o.width}var l=a.columnWidth+=n.gutter,e=o.width+n.gutter;if(n.cols)s=n.cols;else{var s=e/l,u=l-e%l,c=u&&u<1?"round":"floor";s=Math[c](s)}a.cols=Math.max(s,1)},_positionItem:function(t,o,a,r){n.css(t,{position:"absolute"}),r?i.relativePositionitem(t,{left:o,top:a}):t[this._.animation]?t[this._.animation](o,a):t.moveto(o,a)},_getColGroup:function(t){var o=this._,i=o.calculated;if(t<2)return i.colYs;for(var n=[],a=i.cols+1-t,r=0;r<a;r++){var l=i.colYs.slice(r,r+t);n[r]=Math.max.apply(Math,l)}return n},_getItemLayoutPosition:function(t){var o=this._,n=o.calculated,a=i.marginSize(t),r=a.width%n.columnWidth,l=r&&r<1?"round":"ceil",e=Math[l](a.width/n.columnWidth);e=Math.min(e,n.cols);for(var s=this._getColGroup(e),u=Math.min.apply(Math,s),c=s.indexOf(u),y={x:n.columnWidth*c,y:u},d=u+a.height,h=n.cols+1-s.length,m=0;m<h;m++)n.colYs[c+m]=d;return y},_filterItems:function(t){return t},_resetLayout:function(t,o,i){var n=this._,a=n.calculated;this._measureColumns(t,o,i),a.colYs=[];for(var r=0;r<a.cols;r++)a.colYs.push(0);a.maxY=0},_calcLayout:function(t,o,i){this._resetLayout(t,o,i);var n=[];return t.forEach(function(t){var o=this._getItemLayoutPosition(t);o.item=t,n.push(o)},this),n},_postLayout:function(t,o){var i=this._;if(i.autoFit){var n=i.calculated,a=Math.max.apply(Math,n.colYs);o.domNode.style.height=a+"px"}t.forEach(function(t){this._positionItem(t.item,t.x,t.y,t.isInstant)},this)},layout:function(){var t=this._,n=t.container,a=o.children(n,t.items),r=i.clientSize(n),l=this._calcLayout(a,r,n);this._postLayout(l,n)},init:function(o,i){var n=this._=t.mixin({autoFit:!0,columnWidth:0,cols:0,gutter:0,animation:"moveto",calculated:{colYs:null,columnWidth:0,cols:0}},i);n.container=o}}),l=a.masonry=function(t,o){var i=new r(t,o);i.layout()};return l}),t("skylark-domx-layouts/rows",["skylark-langx/langx","skylark-domx-query","./layouts"],function(t,o,i){var n=i.rows=function(i,n){var n=t.mixin({items:".item"},n),a=o(i).children(n.items);a.css({left:"0px",top:"0px",position:"relative",display:"list-item"})};return n}),t("skylark-domx-layouts/table",["skylark-langx/langx","skylark-domx-query","./layouts"],function(t,o,i){var n=i.table=function(i,n){var n=t.mixin({items:".item"},n),a=o(i).children(n.items);a.css({width:"100%",display:"table-row"}),a.each(function(){o(this).children().css({display:"table-cell"})})};return n}),t("skylark-domx-layouts/main",["./layouts","./box","./bsgrid","./columns","./dock","./DockStyle","./flow","./grid","./masonry","./rows","./table"],function(t){return t}),t("skylark-domx-layouts",["skylark-domx-layouts/main"],function(t){return t})}(i),!n){var l=require("skylark-langx-ns");a?module.exports=l:o.skylarkjs=l}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-domx-layouts.js.map
