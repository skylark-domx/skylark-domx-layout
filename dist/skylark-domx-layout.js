/**
 * skylark-domx-layout - The dom layout features enhancement for skylark utils.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.1
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(t,o){var i=o.define,n=o.require,l="function"==typeof i&&i.amd,a=!l&&"undefined"!=typeof exports;if(!l&&!i){var r={};i=o.define=function(t,o,i){"function"==typeof i?(r[t]={factory:i,deps:o.map(function(o){return function(t,o){if("."!==t[0])return t;var i=o.split("/"),n=t.split("/");i.pop();for(var l=0;l<n.length;l++)"."!=n[l]&&(".."==n[l]?i.pop():i.push(n[l]));return i.join("/")}(o,t)}),resolved:!1,exports:null},n(t)):r[t]={factory:null,resolved:!0,exports:i}},n=o.require=function(t){if(!r.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var i=r[t];if(!i.resolved){var l=[];i.deps.forEach(function(t){l.push(n(t))}),i.exports=i.factory.apply(o,l)||null,i.resolved=!0}return i.exports}}if(!i)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,o){t("skylark-domx-layout/layouts",["skylark-utils-dom/skylark","skylark-utils-dom/langx"],function(t,o){var i=t.layouts={};return i}),t("skylark-domx-layout/Orientation",["skylark-langx/langx","./layouts"],function(t,o){var i=layout.Orientation={horz:1,vert:2};return i}),t("skylark-domx-layout/box",["skylark-langx/langx","skylark-utils-dom/query","./layouts","./Orientation"],function(t,o,i,n){var l=i.box=function(i,l){var l=t.mixin({items:".item",wspacing:100,hspacing:100,orientation:n.vert},l),a=o(i).clientSize(),r=a.width,e=a.height,s=0,u=0,c=o(i).children(l.items);c.each(function(t){o(this).css({left:s,top:u,position:"absolute",display:"inline-block"}),l.orientation==n.vert?(u+=l.hspacing)>=e-l.hspacing&&(u=0,s+=l.wspacing):(s+=l.wspacing)>=r-l.wspacing&&(s=0,u+=l.hspacing)})};return l}),t("skylark-domx-layout/bsgrid",["skylark-langx/langx","./layouts"],function(t,o){var i=o.bsgrid=function(t,o){throw new Error("This method is not implemented!")};return i}),t("skylark-domx-layout/columns",["skylark-langx/langx","skylark-utils-dom/query","./layouts"],function(t,o,i){var n=i.columns=function(i,n){var n=t.mixin({items:".item"},n),l=o(i).children(n.items);l.css({left:"0px",top:"0px",position:"relative",display:"table-cell"})};return n}),t("skylark-domx-layout/DockStyle",["skylark-langx/langx","./layouts"],function(t,o){var i=o.DockStyle={none:1,left:2,top:3,right:4,bottom:5,client:6};return i}),t("skylark-domx-layout/dock",["skylark-langx/langx","skylark-utils-dom/datax","skylark-utils-dom/finder","skylark-utils-dom/geom","./layouts","./DockStyle"],function(t,o,i,n,l,n,a){var r=l.dock=function(l,a){var a=t.mixin({items:"[data-region]"},a),r=n.clientSize(l),e={l:0,t:0,w:r.width,h:r.height},s=i.children(l,a.items);(s=s.filter(function(t){return"client"!=o.data(t,"region")}).concat(s.filter(function(t){return"client"==o.data(t,"region")}))).forEach(function(t){var i=o.data(t,"region"),l=n.size(t);if(!i)throw new Error("No dock setting for "+t.id);styler.css(elm,{position:"absolute"});var a={left:e.l,top:e.t};"top"==i||"bottom"==i?(a.width=e.w,e.h-=l.height,a.top=e.t+e.h):"left"==i||"right"==i?(a.height=e.h,e.w-=l.width,"left"==pos?e.l+=l.width:a.left=e.l+e.w):"client"==i&&(a.width=e.w,a.height=e.h),n.relativeRect(t,a)})};return r}),t("skylark-domx-layout/flow",["skylark-langx/langx","skylark-utils-dom/query","./layouts"],function(t,o,i){var n=i.flow=function(i,n){var n=t.mixin({items:".item"},n),l=o(i).children(n.items);l.css({left:"0px",top:"0px",position:"relative",display:"inline-block"})};return n}),t("skylark-domx-layout/grid",["skylark-langx/langx","./layouts"],function(t,o){var i=o.grid=function(t,o){throw new Error("This method is not implemented!")};return i}),t("skylark-domx-layout/masonry",["skylark-langx/langx","skylark-utils-dom/finder","skylark-utils-dom/geom","skylark-utils-dom/styler","./layouts"],function(t,o,i,n,l){var a=t.klass({_measureColumns:function(t,o,i){var n=this._,l=n.calculated;if(n.columnWidth)l.columnWidth=n.columnWidth;else{var a=t[0];l.columnWidth=a&&a.bounds().extraWidth()||o.width}var r=l.columnWidth+=n.gutter,e=o.width+n.gutter;if(n.cols)s=n.cols;else{var s=e/r,u=r-e%r,c=u&&u<1?"round":"floor";s=Math[c](s)}l.cols=Math.max(s,1)},_positionItem:function(t,o,l,a){n.css(t,{position:"absolute"}),a?i.relativePositionitem(t,{left:o,top:l}):t[this._.animation]?t[this._.animation](o,l):t.moveto(o,l)},_getColGroup:function(t){var o=this._,i=o.calculated;if(t<2)return i.colYs;for(var n=[],l=i.cols+1-t,a=0;a<l;a++){var r=i.colYs.slice(a,a+t);n[a]=Math.max.apply(Math,r)}return n},_getItemLayoutPosition:function(t){var o=this._,n=o.calculated,l=i.marginSize(t),a=l.width%n.columnWidth,r=a&&a<1?"round":"ceil",e=Math[r](l.width/n.columnWidth);e=Math.min(e,n.cols);for(var s=this._getColGroup(e),u=Math.min.apply(Math,s),c=s.indexOf(u),y={x:n.columnWidth*c,y:u},d=u+l.height,m=n.cols+1-s.length,h=0;h<m;h++)n.colYs[c+h]=d;return y},_filterItems:function(t){return t},_resetLayout:function(t,o,i){var n=this._,l=n.calculated;this._measureColumns(t,o,i),l.colYs=[];for(var a=0;a<l.cols;a++)l.colYs.push(0);l.maxY=0},_calcLayout:function(t,o,i){this._resetLayout(t,o,i);var n=[];return t.forEach(function(t){var o=this._getItemLayoutPosition(t);o.item=t,n.push(o)},this),n},_postLayout:function(t,o){var i=this._;if(i.autoFit){var n=i.calculated,l=Math.max.apply(Math,n.colYs);o.domNode.style.height=l+"px"}t.forEach(function(t){this._positionItem(t.item,t.x,t.y,t.isInstant)},this)},layout:function(){var t=this._,n=t.container,l=o.children(n,t.items),a=i.clientSize(n),r=this._calcLayout(l,a,n);this._postLayout(r,n)},init:function(o,i){var n=this._=t.mixin({autoFit:!0,columnWidth:0,cols:0,gutter:0,animation:"moveto",calculated:{colYs:null,columnWidth:0,cols:0}},i);n.container=o}}),r=l.masonry=function(t,o){var i=new a(t,o);i.layout()};return r}),t("skylark-domx-layout/rows",["skylark-langx/langx","skylark-utils-dom/query","./layouts"],function(t,o,i){var n=i.rows=function(i,n){var n=t.mixin({items:".item"},n),l=o(i).children(n.items);l.css({left:"0px",top:"0px",position:"relative",display:"list-item"})};return n}),t("skylark-domx-layout/table",["skylark-langx/langx","skylark-utils-dom/query","./layouts"],function(t,o,i){var n=i.table=function(i,n){var n=t.mixin({items:".item"},n),l=o(i).children(n.items);l.css({width:"100%",display:"table-row"}),l.each(function(){o(this).children().css({display:"table-cell"})})};return n}),t("skylark-domx-layout/main",["./layouts","./box","./bsgrid","./columns","./dock","./DockStyle","./flow","./grid","./masonry","./rows","./table"],function(t){return t}),t("skylark-domx-layout",["skylark-domx-layout/main"],function(t){return t})}(i),!l){var e=n("skylark-langx/skylark");a?module.exports=e:o.skylarkjs=e}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-domx-layout.js.map
