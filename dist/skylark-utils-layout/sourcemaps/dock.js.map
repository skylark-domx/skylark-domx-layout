{"version":3,"sources":["dock.js"],"names":["define","langx","datax","finder","geom","layouts","DockStyle","dock","container","options","mixin","items","size","clientSize","dim","l","t","w","width","h","height","children","filter","item","data","concat","forEach","region","childSize","Error","id","styler","css","elm","position","bounds","left","top","pos","relativeRect"],"mappings":";;;;;;;AAAAA,QACI,sBACA,sBACA,uBACA,qBACA,YACH,eACE,SAASC,EAAMC,EAAMC,EAAOC,EAAKC,EAAQD,EAAKE,GAE7C,GAAIC,GAAOF,EAAQE,KAAO,SAASC,EAAUC,GACzC,GAAIA,GAAUR,EAAMS,OAChBC,MAAQ,iBACVF,GAEEG,EAAOR,EAAKS,WAAWL,GAC1BM,GACCC,EAAI,EACJC,EAAI,EACJC,EAAIL,EAAKM,MACTC,EAAIP,EAAKQ,QAEVC,EAAWlB,EAAOkB,SAASb,EAAUC,EAAQE,MAEpDU,GAAWA,EAASC,OAAO,SAASC,GAAO,MAAoC,UAA7BrB,EAAMsB,KAAKD,EAAK,YAChEE,OAAOJ,EAASC,OAAO,SAASC,GAAO,MAAoC,UAA7BrB,EAAMsB,KAAKD,EAAK,aAGhEF,EAASK,QAAQ,SAASH,GACzB,GAAII,GAASzB,EAAMsB,KAAKD,EAAK,UACzBK,EAAYxB,EAAKQ,KAAKW,EAE1B,KAAII,EACH,KAAM,IAAIE,OAAM,uBAAyBN,EAAKO,GAK/CC,QAAOC,IAAIC,KACVC,SAAW,YAIZ,IAAIC,IACHC,KAAOtB,EAAIC,EACXsB,IAAMvB,EAAIE,EAKE,QAAVW,GAA6B,UAAVA,GACrBQ,EAAOjB,MAAQJ,EAAIG,EACnBH,EAAIK,GAAKS,EAAUR,OAIlBe,EAAOE,IAAMvB,EAAIE,EAAIF,EAAIK,GAER,QAAVQ,GAA8B,SAAVA,GAC5BQ,EAAOf,OAASN,EAAIK,EACpBL,EAAIG,GAAKW,EAAUV,MACT,QAAPoB,IACFxB,EAAIC,GAAKa,EAAUV,MAEnBiB,EAAOC,KAAOtB,EAAIC,EAAID,EAAIG,GAET,UAAVU,IACRQ,EAAOjB,MAAQJ,EAAIG,EACnBkB,EAAOf,OAASN,EAAIK,GAGrBf,EAAKmC,aAAahB,EAAKY,KAMtB,OAAO5B","file":"../dock.js","sourcesContent":["define([\r\n    \"skylark-langx/langx\",\r\n    \"skylark-utils/datax\",\r\n    \"skylark-utils/finder\",\r\n    \"skylark-utils/geom\",\r\n    \"./layouts\",\r\n\t\"./DockStyle\",\r\n], function(langx,datax,finder,geom,layouts,geom,DockStyle) {\r\n\r\n    var dock = layouts.dock = function(container,options) {\r\n        var options = langx.mixin({\r\n            items : \"[data-region]\" // children element selector for item\r\n        },options)       \r\n\r\n        var size = geom.clientSize(container),\r\n        \tdim = {\r\n        \t\tl : 0,\r\n        \t\tt : 0,\r\n        \t\tw : size.width,\r\n        \t\th : size.height,\r\n        \t},\r\n        \tchildren = finder.children(container,options.items);\r\n\r\n\t\tchildren = children.filter(function(item){ return datax.data(item,\"region\") != \"client\"; })\r\n\t\t\t.concat(children.filter(function(item){ return datax.data(item,\"region\") == \"client\"; }));\r\n\r\n\t\t// set positions/sizes\r\n\t\tchildren.forEach(function(item){\r\n\t\t\tvar region = datax.data(item,\"region\"),\r\n\t\t\t    childSize = geom.size(item);\r\n\r\n\t\t\tif(!region){\r\n\t\t\t\tthrow new Error(\"No dock setting for \" + item.id)\r\n\t\t\t}\r\n\r\n\t\t\t// set elem to upper left corner of unused space; may move it later\r\n\r\n\t\t\tstyler.css(elm,{\r\n\t\t\t\tposition : \"absolute\"\r\n\t\t\t});\r\n\r\n\t\t\t// Size adjustments to make to this child widget\r\n\t\t\tvar bounds = {\r\n\t\t\t\tleft : dim.l,\r\n\t\t\t\ttop : dim.t\r\n\t\t\t};\r\n\r\n\t\t\t// set size && adjust record of remaining space.\r\n\t\t\t// note that setting the width of a <div> may affect its height.\r\n\t\t\tif(region == \"top\" || region == \"bottom\"){\r\n\t\t\t\tbounds.width = dim.w;\r\n\t\t\t\tdim.h -= childSize.height;\r\n\t\t\t\tif(\"region\" == \"top\"){\r\n\t\t\t\t\tdim.t += childSize.height;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbounds.top = dim.t + dim.h;\r\n\t\t\t\t}\r\n\t\t\t}else if(region == \"left\" || region == \"right\"){\r\n\t\t\t\tbounds.height = dim.h;\r\n\t\t\t\tdim.w -= childSize.width;\r\n\t\t\t\tif(pos == \"left\"){\r\n\t\t\t\t\tdim.l += childSize.width;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbounds.left = dim.l + dim.w;\r\n\t\t\t\t}\r\n\t\t\t}else if(region == \"client\"){\r\n\t\t\t\tbounds.width = dim.w;\r\n\t\t\t\tbounds.height = dim.h;\r\n\t\t\t}\r\n\r\n\t\t\tgeom.relativeRect(item,bounds);\r\n\t\t});\r\n\r\n\r\n    };\r\n    \r\n    return dock;    \r\n\r\n});\r\n"]}