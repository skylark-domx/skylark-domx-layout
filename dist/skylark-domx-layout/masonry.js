/**
 * skylark-domx-layout - The dom layout features enhancement for skylark utils.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.1
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx/langx","skylark-utils-dom/finder","skylark-utils-dom/geom","skylark-utils-dom/styler","./layouts"],function(t,i,o,a,n){var l=t.klass({_measureColumns:function(t,i,o){var a=this._,n=a.calculated;if(a.columnWidth)n.columnWidth=a.columnWidth;else{var l=t[0];n.columnWidth=l&&l.bounds().extraWidth()||i.width}var s=n.columnWidth+=a.gutter,e=i.width+a.gutter;if(a.cols)u=a.cols;else{var u=e/s,c=s-e%s;u=Math[c&&c<1?"round":"floor"](u)}n.cols=Math.max(u,1)},_positionItem:function(t,i,n,l){a.css(t,{position:"absolute"}),l?o.relativePositionitem(t,{left:i,top:n}):t[this._.animation]?t[this._.animation](i,n):t.moveto(i,n)},_getColGroup:function(t){var i=this._.calculated;if(t<2)return i.colYs;for(var o=[],a=i.cols+1-t,n=0;n<a;n++){var l=i.colYs.slice(n,n+t);o[n]=Math.max.apply(Math,l)}return o},_getItemLayoutPosition:function(t){var i=this._.calculated,a=o.marginSize(t),n=a.width%i.columnWidth,l=Math[n&&n<1?"round":"ceil"](a.width/i.columnWidth);l=Math.min(l,i.cols);for(var s=this._getColGroup(l),e=Math.min.apply(Math,s),u=s.indexOf(e),c={x:i.columnWidth*u,y:e},r=e+a.height,h=i.cols+1-s.length,m=0;m<h;m++)i.colYs[u+m]=r;return c},_filterItems:function(t){return t},_resetLayout:function(t,i,o){var a=this._.calculated;this._measureColumns(t,i,o),a.colYs=[];for(var n=0;n<a.cols;n++)a.colYs.push(0);a.maxY=0},_calcLayout:function(t,i,o){this._resetLayout(t,i,o);var a=[];return t.forEach(function(t){var i=this._getItemLayoutPosition(t);i.item=t,a.push(i)},this),a},_postLayout:function(t,i){var o=this._;if(o.autoFit){var a=o.calculated,n=Math.max.apply(Math,a.colYs);i.domNode.style.height=n+"px"}t.forEach(function(t){this._positionItem(t.item,t.x,t.y,t.isInstant)},this)},layout:function(){var t=this._,a=t.container,n=i.children(a,t.items),l=o.clientSize(a),s=this._calcLayout(n,l,a);this._postLayout(s,a)},init:function(i,o){(this._=t.mixin({autoFit:!0,columnWidth:0,cols:0,gutter:0,animation:"moveto",calculated:{colYs:null,columnWidth:0,cols:0}},o)).container=i}});return n.masonry=function(t,i){new l(t,i).layout()}});
//# sourceMappingURL=sourcemaps/masonry.js.map
